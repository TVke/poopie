!function(){const e=function(){const e=this;return e.data,e.subs=[],e.methods={publish:function(i){if(void 0===i)return e.data;e.data=i;for(let i=0,l=e.subs.length;i<l;++i)e.subs[i](e.data)},subscribe:function(i){-1===e.subs.indexOf(i)&&e.subs.push(i)},unsubscribe:function(i){-1!==e.subs.indexOf(i)&&e.subs.splice(e.subs.indexOf(i),1)}},e.methods},i={playingField:document.getElementById("field"),fieldBaseImage:document.getElementsByClassName("diaper-base")[0],fieldCoverImage:document.getElementsByClassName("diaper-cover")[0],mineImage:document.getElementsByClassName("mine")[0],flagImage:document.getElementsByClassName("flag")[0],levelSelection:document.getElementById("level-selection"),levelSelectButtons:document.querySelectorAll("[data-level]")},l={selectedLevel:new e,fieldSizeOptions:{easy:{x:8,y:8},medium:{x:10,y:10},expert:{x:16,y:16}},mineAmountOptions:{easy:10,medium:20,expert:40},field:[],mines:[],mineLocationOptions:[]},n={modelField:function(i){const n=l.fieldSizeOptions[i].y,t=l.fieldSizeOptions[i].x;l.field=new Array(n);for(let i=0;i<n;i++){l.field[i]=new Array(t);for(let n=0;n<t;n++)l.field[i][n]=new e,l.field[i][n].publish(0),l.mineLocationOptions.push({x:n,y:i})}},viewField:function(){const e=l.field.length,n=l.field[0].length;i.playingField.style.gridTemplateColumns="repeat("+e+", minmax(0, 1fr))",i.playingField.style.gridTemplateRows="repeat("+n+", minmax(0, 1fr))";for(let l=0;l<e;l++)for(let e=0;e<n;e++){const n=document.createElement("div"),t=i.fieldBaseImage.cloneNode(),s=document.createElement("p"),d=i.mineImage.cloneNode(),o=i.fieldCoverImage.cloneNode();n.className="relative w-full h-full",n.dataset.x=""+e,n.dataset.y=""+l,s.className="absolute inset-0 flex justify-center items-center text-[min(3.5vw,_37px)]",n.appendChild(t),n.appendChild(s),n.appendChild(d),n.appendChild(o),i.playingField.appendChild(n)}},modelMines:function(e){const i=l.mineAmountOptions[e],n=l.fieldSizeOptions[e].y*l.fieldSizeOptions[e].x;for(let e=0;e<i;e++){const e=Math.floor(Math.random()*n),i=l.mineLocationOptions.splice(e,1);l.mines.push(...i)}for(let e=0,i=l.mines.length;e<i;e++){const i=l.mines[e];l.field[i.y][i.x].publish("mine")}},modelFieldValues:function(e){for(let i=0,n=e.length;i<n;i++){let n,t,s=e[i].x,d=e[i].y;n=s-1,t=d-1,n>=0&&t>=0&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1),n=s-1,t=d,n>=0&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1),n=s-1,t=d+1,n>=0&&t<l.field.length&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1),n=s,t=d-1,t>=0&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1),n=s,t=d+1,t<l.field.length&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1),n=s+1,t=d-1,n<l.field[0].length&&t>=0&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1),n=s-1,t=d,n>=0&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1),n=s+1,t=d+1,n<l.field[0].length&&t<l.field.length&&"mine"!==l.field[t][n].publish()&&l.field[t][n].publish(l.field[t][n].publish()+1)}},viewFields:function(e){const i=e.length,l=e[0].length;for(let n=0;n<i;n++)for(let i=0;i<l;i++)"mine"===e[n][i].publish()&&document.querySelector('[data-x="'+i+'"][data-y="'+n+'"] .mine').classList.remove("hidden"),e[n][i].publish()>0&&(document.querySelector('[data-x="'+i+'"][data-y="'+n+'"] p').innerHTML=e[n][i].publish())},init:function(){l.selectedLevel.subscribe((function(e){i.levelSelection.classList.add("hidden","sm:hidden"),n.modelField(e),n.viewField(),n.modelMines(e),n.modelFieldValues(l.mines),n.viewFields(l.field)})),[...i.levelSelectButtons].forEach((e=>{e.addEventListener("click",(function(){l.selectedLevel.publish(e.dataset.level)}))}))}};n.init()}();