!function(){const e=function(){const e=this;return e.data,e.subs=[],e.methods={publish:function(l){if(void 0===l)return e.data;e.data=l;for(let l=0,i=e.subs.length;l<i;++l)e.subs[l](e.data)},subscribe:function(l){-1===e.subs.indexOf(l)&&e.subs.push(l)},unsubscribe:function(l){-1!==e.subs.indexOf(l)&&e.subs.splice(e.subs.indexOf(l),1)}},e.methods},l={playingField:document.getElementById("field"),fieldBaseImage:document.getElementsByClassName("diaper-base")[0],fieldCoverImage:document.getElementsByClassName("diaper-cover")[0],mineImage:document.getElementsByClassName("mine")[0],flagImage:document.getElementsByClassName("flag")[0],levelSelection:document.getElementById("level-selection"),levelSelectButtons:document.querySelectorAll("[data-level]")},i={selectedLevel:new e,fieldSizeOptions:{easy:{x:8,y:8},medium:{x:10,y:10},expert:{x:16,y:16}},mineAmountOptions:{easy:10,medium:20,expert:40},field:[],mines:[],mineLocationOptions:[]},n={modelField:function(l){const n=i.fieldSizeOptions[l].y,t=i.fieldSizeOptions[l].x;i.field=new Array(n);for(let l=0;l<n;l++){i.field[l]=new Array(t);for(let n=0;n<t;n++)i.field[l][n]=new e,i.field[l][n].publish(0),i.mineLocationOptions.push({x:n,y:l})}},viewField:function(){const e=i.field.length,n=i.field[0].length;l.playingField.style.gridTemplateColumns="repeat("+e+", minmax(0, 1fr))",l.playingField.style.gridTemplateRows="repeat("+n+", minmax(0, 1fr))";for(let i=0;i<e;i++)for(let e=0;e<n;e++){const n=document.createElement("div"),t=l.fieldBaseImage.cloneNode(),d=document.createElement("p"),s=l.mineImage.cloneNode(),o=l.fieldCoverImage.cloneNode();n.className="relative w-full h-full",n.dataset.x=""+e,n.dataset.y=""+i,n.appendChild(t),n.appendChild(d),n.appendChild(s),n.appendChild(o),l.playingField.appendChild(n)}},modelMines:function(e){const l=i.mineAmountOptions[e],n=i.fieldSizeOptions[e].y*i.fieldSizeOptions[e].x;for(let e=0;e<l;e++){const e=Math.floor(Math.random()*n),l=i.mineLocationOptions.splice(e,1);i.mines.push(...l)}for(let e=0,l=i.mines.length;e<l;e++){const l=i.mines[e];i.field[l.y][l.x].publish("mine")}},modelFieldValues:function(e){for(let l=0,n=e.length;l<n;l++){let n,t,d=e[l].x,s=e[l].y;n=d-1,t=s-1,n>=0&&t>=0&&i.field[t][n].publish(i.field[t][n].publish()+1),n=d-1,t=s,n>=0&&i.field[t][n].publish(i.field[t][n].publish()+1),n=d-1,t=s+1,n>=0&&t<i.field.length&&i.field[t][n].publish(i.field[t][n].publish()+1),n=d,t=s-1,t>=0&&i.field[t][n].publish(i.field[t][n].publish()+1),n=d,t=s+1,t<i.field.length&&i.field[t][n].publish(i.field[t][n].publish()+1),n=d+1,t=s-1,n<i.field[0].length&&t>=0&&i.field[t][n].publish(i.field[t][n].publish()+1),n=d-1,t=s,n>=0&&i.field[t][n].publish(i.field[t][n].publish()+1),n=d+1,t=s+1,n<i.field[0].length&&t<i.field.length&&i.field[t][n].publish(i.field[t][n].publish()+1)}},viewFields:function(e){},init:function(){i.selectedLevel.subscribe((function(e){l.levelSelection.classList.add("hidden","sm:hidden"),i.field=[],n.modelField(e),n.viewField(),n.modelMines(e),n.modelFieldValues(i.mines),n.viewFields(i.field)})),[...l.levelSelectButtons].forEach((e=>{e.addEventListener("click",(function(){i.selectedLevel.publish(e.dataset.level)}))}))}};n.init()}();