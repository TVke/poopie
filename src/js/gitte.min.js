!function(){const e=function(){const e=this;return e.data,e.subs=[],e.methods={publish:function(l){if(void 0===l)return e.data;e.data=l;for(let l=0,i=e.subs.length;l<i;++l)e.subs[l](e.data)},subscribe:function(l){-1===e.subs.indexOf(l)&&e.subs.push(l)},unsubscribe:function(l){-1!==e.subs.indexOf(l)&&e.subs.splice(e.subs.indexOf(l),1)}},e.methods},l={playingField:document.getElementById("field"),fieldBaseImage:document.getElementsByClassName("diaper-base")[0],fieldCoverImage:document.getElementsByClassName("diaper-cover")[0],mineImage:document.getElementsByClassName("mine")[0],flagImage:document.getElementsByClassName("flag")[0],levelSelection:document.getElementById("level-selection"),levelSelectButtons:document.querySelectorAll("[data-level]")},i={selectedLevel:new e,fieldSizeOptions:{easy:{x:8,y:8},medium:{x:10,y:10},expert:{x:16,y:16}},mineAmountOptions:{easy:10,medium:20,expert:40},field:[],mines:[],mineLocationOptions:[]},t={modelField:function(l){const t=i.fieldSizeOptions[l].y,n=i.fieldSizeOptions[l].x;i.field=new Array(t);for(let l=0;l<t;l++){i.field[l]=new Array(n);for(let t=0;t<n;t++)i.field[l][t]=new e,i.field[l][t].publish(0),i.mineLocationOptions.push({x:t,y:l})}},viewField:function(){const e=i.field.length,t=i.field[0].length;l.playingField.style.gridTemplateColumns="repeat("+e+", minmax(0, 1fr))",l.playingField.style.gridTemplateRows="repeat("+t+", minmax(0, 1fr))";for(let i=0;i<e;i++)for(let e=0;e<t;e++){const t=document.createElement("div"),n=l.fieldBaseImage.cloneNode(),s=document.createElement("p"),d=l.mineImage.cloneNode(),o=l.fieldCoverImage.cloneNode();t.className="relative w-full h-full",t.dataset.x=""+e,t.dataset.y=""+i,s.className="absolute inset-0 flex justify-center items-center text-[min(3.5vw,_37px)]",t.appendChild(n),t.appendChild(s),t.appendChild(d),t.appendChild(o),l.playingField.appendChild(t)}},modelMines:function(e){const l=i.mineAmountOptions[e],t=i.fieldSizeOptions[e].y*i.fieldSizeOptions[e].x;for(let e=0;e<l;e++){const e=Math.floor(Math.random()*t),l=i.mineLocationOptions.splice(e,1);i.mines.push(...l)}for(let e=0,l=i.mines.length;e<l;e++){const l=i.mines[e];i.field[l.y][l.x].publish("mine")}},modelFieldValues:function(e){for(let l=0,t=e.length;l<t;l++){let t,n,s=e[l].x,d=e[l].y;t=s-1,n=d-1,t>=0&&n>=0&&i.field[n][t].publish(i.field[n][t].publish()+1),t=s-1,n=d,t>=0&&i.field[n][t].publish(i.field[n][t].publish()+1),t=s-1,n=d+1,t>=0&&n<i.field.length&&i.field[n][t].publish(i.field[n][t].publish()+1),t=s,n=d-1,n>=0&&i.field[n][t].publish(i.field[n][t].publish()+1),t=s,n=d+1,n<i.field.length&&i.field[n][t].publish(i.field[n][t].publish()+1),t=s+1,n=d-1,t<i.field[0].length&&n>=0&&i.field[n][t].publish(i.field[n][t].publish()+1),t=s-1,n=d,t>=0&&i.field[n][t].publish(i.field[n][t].publish()+1),t=s+1,n=d+1,t<i.field[0].length&&n<i.field.length&&i.field[n][t].publish(i.field[n][t].publish()+1)}},viewFields:function(e){const l=e.length,i=e[0].length;for(let t=0;t<l;t++)for(let l=0;l<i;l++)"mine"===e[t][l].publish()&&document.querySelector('[data-x="'+l+'"][data-y="'+t+'"] .mine').classList.remove("hidden"),e[t][l].publish()>0&&(document.querySelector('[data-x="'+l+'"][data-y="'+t+'"] p').innerHTML=e[t][l].publish())},init:function(){i.selectedLevel.subscribe((function(e){l.levelSelection.classList.add("hidden","sm:hidden"),t.modelField(e),t.viewField(),t.modelMines(e),t.modelFieldValues(i.mines),t.viewFields(i.field)})),[...l.levelSelectButtons].forEach((e=>{e.addEventListener("click",(function(){i.selectedLevel.publish(e.dataset.level)}))}))}};t.init()}();